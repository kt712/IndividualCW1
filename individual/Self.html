<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="subjects.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.10/dist/vue.js"></script>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <title>Individual</title>


</head>
<body>

    <div id="open">
        <header>
           <h1 v-text="sitename" class="text-center"></h1> 
           <button v-on:click='showCheckout' v-show="cartItemCount >0" v-if="buttonvalue()">
            {{cartItemCount}}

            <span class="fas fa-cart-plus">Checkout</span>
           </button>
           <div style="display: flex; flex-wrap: wrap;">
            <div v-for="subject in cart2" v-show="showCartItems">
                <h3 v-text="subject.title"></h3>
                <figure>
                    <img v-bind:src="subject.image" height="70" width="70">
                </figure>
                <p>Location:{{subject.location}}</p>
                <p>Price:$ {{subject.price}}</p>
                <p>Spaces: only {{subject.availableInventory - cartCount(subject.id)}} are left!</p>
                <button v-on:click='removeproduct(subject)' v-if='canAddToCart(subject)'>Remove from cart</button> 

                <button disabled="disable" v-else></button>
                </div>

            </div>
        </header>
        <main>
            <div v-if="showSubject">
                <table>
                    <td><b>Sort by::</b></td>
                    <tr>
                        <td> <input type="radio" name="a"
                                    v-on:click="sortedsub(subjects.title)">
                                    Subject
                        </td>
                    <tr>
                        <td><input type="radio" name="a"
                                    v-on:click="sortedprice(subjects.price)">
                                    Price
                        </td>
                    </tr>

                    <tr>
                        <td><input type="radio" name="a"
                                    v-on:click="sortedinventory(subjects.availableInventory)">
                                    Availability
                                </td>
                    </tr>
                    <tr>
                        <td><input type="radio" name="a"
                                    v-on:click="sortedlocation(subjects.location)">
                                    Location
                                </td>
                    </tr>

                </table>
                <div>
                    <br>
                    <table>
                        <tr>
                            <td><input type="radio" name="b"
                                v-on:click="sortingasc(subjects.title)">
                                Ascending
                    </td>
                           
                        </tr>
                        <tr>
                            <td><input type="radio" name="b"
                                v-on:click="sortingdsc(subjects.title)">
                                Descending
                    </td>
                        </tr>
                    </table>
                </div>
                <div style="display: flex; flex-wrap: wrap;">
                    <div v-for="subject in subjects"  class="container border border-primary" style="width:20%; padding:20px; margin:20px;" >
                      <img v-bind:src="subject.image" height="100" width="100">
                      <div class="card-body"></div>
                       <h2 v-text="subject.title"class="card-title" ></h2>
                        <p class="card-text" >Location:{{subject.location}}</p>
                        <p class="card-text">Price: $ {{subject.price}}</p>
                        <p class="card-text">Spaces:  {{subject.availableInventory - cartCount(subject.id)}} available!</p>
    
    
                        <button  class="btn btn-primary" @click="display = true" v-on:click='addToCart(subject)' v-if='canAddToCart(subject)'>Add
                            to cart</button>
    
                        <button v-else>Add to cart</button>
    
                      </div>
                     </div>
                </div>
                <div v-else>
                    <h2 style="text-align: center;">Checkout</h2>
                    <p>
                        <b>First Name:</b>
                        <input v-model="order.firstName" placeholder="ENTER YOUR FIRST NAME!" required />
                    </p>
                    <p>
                        <b>Last Name:</b>
                        <input v-model="order.lastName" placeholder="ENTER YOUR LAST NAME!" />
                    </p>
                
                    <p>
                        <b>Phone:</b>
                        <input type ="number"  v-model="order.phone" placeholder="ENTER UR PHONE NUMBER!" />
                    </p>
                    <h2>Order Information</h2>
                   
                    <p>First Name: {{order.firstName}}</p>
                     
                     <p>Last Name: {{order.lastName}}</p>
                 
                     <p>Phone number: {{order.phone}}</p>
     
                     <button v-on:click="submitForm">Place Order</button>

            </div>
        </main>
    </div>
    <script type="text/javascript">
        var myClass = new Vue({
            el: '#open',
            data: {
    
    sitename: 'Welcome to Ismails classroom',
    subjects: mySub,

    display: false,
    
    cart: [],
    cart2: [],
    showSubject: true,
    showCartItems:false,

    order: {
        firstName: '',
        lastName: '',
        phone: '',
       
    },

},
methods: {
   addToCart(subject) {
   this.cart.push(subject.id);
   this.cart2.push(subject);
    
    
    
   },
   
sortedsub() {
    function compare(x, y) {
        if (x.title > y.title)
           return 1;
        else{
           return -1;
          }
                        
    
    
        }
        return this.subjects.sort(compare);
    
    },
    sortedinventory() {
       function compare(x, y) {
         if (x.availableInventory > y.availableInventory)
            return 1;
         else{
            return -1;
          }
    
    
        }
     return this.subjects.sort(compare);
    },
    
     sortedlocation() {
                        function compare(x, y) {
                            if (x.location > y.location)
                                return 1;
                           else{
                               return -1;
                           }
    
    
                        }
                        return this.subjects.sort(compare);
    
                    },
    
                    sortedprice() {
                        function compare(x, y) {
                            if (x.price > y.price)
                                return 1;
                            else{
                                return -1
                            };
    
                        }
                        return this.subjects.sort(compare);
    
                    },   
                    sortingasc() {
                        function compare(a, b) {
                            if (a.title > b.title)
                                return 1;
                           else{
                               return -1;
                           }
    
    
                        }
                        return this.subjects.sort(compare);
    
                    },


                    sortingdsc() {
                        function compare(a, b) {
                            if (a.title < b.title)
                                return 1;
                           else{
                               return -1
                           }
    
    
                        }
                        return this.subjects.sort(compare);
    
                    },
                    showCheckout() {
                        this.showSubject = this.showSubject ? false : true;
                        this.showCartItems=this.showCartItems ? false:true;
                        
    
                    },
                    submitForm(l, b, c) {
                        if (this.order.firstName == "" && this.order.lastName == "" && this.order.phone == "") {
    
                             alert('PLEASE ENTER YOUR DETAILS FOR ORDERS')
    
                        }
                        if (this.order.firstName == "") {
                             alert('PLEASE ENTER YOUR NAME')
                        }
                        if (this.order.lastName == "") {
                            return alert('PLEASE ENTER YOU LASTNAME')
                        }
                        if (this.order.phone == "") {
                            return alert('PLEASE ENTER YOUR MOBILE NUM OR PHONE', { background: 'black' });
                        }
                        else {
    
    
                            this.order.firstName = "";
                            this.order.lastName = "";
                            this.order.phone = "";
    
                            return alert(' You have succesfully placed order')
    
    
                        }
    
                    },
                    canAddToCart(subject) {
                        return subject.availableInventory > this.cartCount(subject.id);
                    },
                    cartCount(id) {
    
                        let count = 0;
                        for (let i = 0; i < this.cart.length; i++) {
                            if (this.cart[i] === id) {
                                count++;
    
    
                            }
                        }
                        return count;
    
    
                    },
                   
                    buttonvalue() {
                        if (this.cart.length > 0) {
                            return true;
                        } else {
    
                            return false;
    
                        }
                    },
                    removeproductfrominve()
                    {
                        if(this.cart.length <= 0)
                        {
                            return true;
                        }
                        else{
                            false;
                        }
    
    
                    },
                    removeproduct(subject) {
                        this.cart2.pop(subject);
                        this.cart.pop(subject);
    
                    }
                },
                computed: {
                    cartItemCount() {
    
                        return this.cart.length;
                    }
                },
    
        })

    </script>
    
</body>
</html>